<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>4.4</version>
    <date>2020-02-13T09:29:26Z</date>
    <groups>
        <group>
            <name>Templates/Operating Systems</name>
        </group>
    </groups>
    <templates>
        <template>
            <template>Template VMware Host PowerCLI</template>
            <name>Template VMware Host PowerCLI</name>
            <description>This is a custom Template base on PowerCli that monitors metrics of Vmware Host connecting to vcenter &#13;
Currently monitors only summary KPI like&#13;
- Host CPU, Memory, Version&#13;
- Datastore space usage (customized for &quot;Volume-1&quot;, &quot;Volume-2&quot; and &quot;Volume-3&quot;)&#13;
- Disk LUNs latency (customized for &quot;Volume-1&quot;, &quot;Volume-2&quot; and &quot;Volume-3&quot;)</description>
            <groups>
                <group>
                    <name>Templates/Operating Systems</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>CPU</name>
                </application>
                <application>
                    <name>Datastore General</name>
                </application>
                <application>
                    <name>Datastore Performance</name>
                </application>
                <application>
                    <name>Memory</name>
                </application>
                <application>
                    <name>Status</name>
                </application>
            </applications>
            <items>
                <item>
                    <name>Ballon Memory Usage KB</name>
                    <type>DEPENDENT</type>
                    <key>BallonMemoryUsageKB</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <applications>
                        <application>
                            <name>Memory</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].mem_vmmemctl_average</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                </item>
                <item>
                    <name>CPU Allocated vCPU</name>
                    <type>DEPENDENT</type>
                    <key>CPUAllocatedvCPU</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <applications>
                        <application>
                            <name>CPU</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].TotalVCPU</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                </item>
                <item>
                    <name>Cpu Frequency</name>
                    <type>DEPENDENT</type>
                    <key>CPUFrequency</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <value_type>FLOAT</value_type>
                    <units>Hz</units>
                    <applications>
                        <application>
                            <name>CPU</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].Hz</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                </item>
                <item>
                    <name>Cpu Number</name>
                    <type>DEPENDENT</type>
                    <key>CPUNumber</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <applications>
                        <application>
                            <name>CPU</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].NumCpuPackages</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                </item>
                <item>
                    <name>CPU Overcommit</name>
                    <type>CALCULATED</type>
                    <key>CPUOvercommit</key>
                    <value_type>FLOAT</value_type>
                    <params>last(&quot;CPUAllocatedvCPU&quot;) / last(&quot;CPUThreads&quot;)</params>
                    <applications>
                        <application>
                            <name>CPU</name>
                        </application>
                    </applications>
                    <triggers>
                        <trigger>
                            <expression>{last()}&gt;{$CPU_OVERCOMMIT_WARN}</expression>
                            <name>CPU Overcommit is too high on {HOST.NAME}</name>
                            <priority>HIGH</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>CPU Ready</name>
                    <type>DEPENDENT</type>
                    <key>CPURDY</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <applications>
                        <application>
                            <name>CPU</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].CPUWait</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                    <triggers>
                        <trigger>
                            <expression>{last()}&gt;{$CPU_RDY_WARN}</expression>
                            <name>CPU RDY too high on {HOST.NAME}</name>
                            <priority>WARNING</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Cpu Threads</name>
                    <type>DEPENDENT</type>
                    <key>CPUThreads</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <applications>
                        <application>
                            <name>CPU</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].NumCpuThreads</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                </item>
                <item>
                    <name>CpuTotalMhz</name>
                    <type>DEPENDENT</type>
                    <key>CpuTotalMhz</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <applications>
                        <application>
                            <name>CPU</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].CpuTotalMhz</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                </item>
                <item>
                    <name>CpuUsageMhz</name>
                    <type>DEPENDENT</type>
                    <key>CpuUsageMhz</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <applications>
                        <application>
                            <name>CPU</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].CpuUsageMhz</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                </item>
                <item>
                    <name>CPU Usage Percentage</name>
                    <type>CALCULATED</type>
                    <key>CPUUsagePerc</key>
                    <value_type>FLOAT</value_type>
                    <units>%</units>
                    <params>100 * last(&quot;CpuUsageMhz&quot;) / last(&quot;CpuTotalMhz&quot;)</params>
                    <applications>
                        <application>
                            <name>CPU</name>
                        </application>
                    </applications>
                    <triggers>
                        <trigger>
                            <expression>{avg(5m)}&gt;{$CPU_USAGE_WARN}</expression>
                            <name>Processor load is too high on {HOST.NAME}</name>
                            <priority>HIGH</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Datastore Count</name>
                    <type>DEPENDENT</type>
                    <key>DatastoreCount</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <applications>
                        <application>
                            <name>Datastore General</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].DatastoreCount</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                </item>
                <item>
                    <name>Host Status</name>
                    <type>DEPENDENT</type>
                    <key>HostStatus</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <applications>
                        <application>
                            <name>Status</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].OverAllStatus</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                    <triggers>
                        <trigger>
                            <expression>{last()}&lt;&gt;1</expression>
                            <name>ESX Host Alert on {HOST.NAME}</name>
                            <priority>HIGH</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Memory Swap in Rate</name>
                    <type>DEPENDENT</type>
                    <key>MemorySwapInRate</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <applications>
                        <application>
                            <name>Memory</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].mem_swapin_average</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                </item>
                <item>
                    <name>Memory Swap Out Rate</name>
                    <type>DEPENDENT</type>
                    <key>MemorySwapOutRate</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <applications>
                        <application>
                            <name>Memory</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].mem_swapout_average</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                </item>
                <item>
                    <name>Memory Swap Usage KB</name>
                    <type>DEPENDENT</type>
                    <key>MemorySwapUsageKB</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <applications>
                        <application>
                            <name>Memory</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].mem_swapused_average</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                </item>
                <item>
                    <name>MemoryTotalGB</name>
                    <type>DEPENDENT</type>
                    <key>MemoryTotalGB</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <value_type>FLOAT</value_type>
                    <applications>
                        <application>
                            <name>Memory</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].MemoryTotalGB</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                </item>
                <item>
                    <name>MemoryUsageGB</name>
                    <type>DEPENDENT</type>
                    <key>MemoryUsageGB</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <value_type>FLOAT</value_type>
                    <applications>
                        <application>
                            <name>Memory</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].MemoryUsageGB</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                </item>
                <item>
                    <name>Memory Usage Percentage</name>
                    <type>DEPENDENT</type>
                    <key>MemoryUsagePerc</key>
                    <delay>0</delay>
                    <value_type>FLOAT</value_type>
                    <units>%</units>
                    <applications>
                        <application>
                            <name>Memory</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].mem_usage_average</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                    <triggers>
                        <trigger>
                            <expression>{avg(5m)}&gt;{$MEM_USAGE_WARN}</expression>
                            <name>Memory usage is too high on {HOST.NAME}</name>
                            <priority>HIGH</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>PowerState</name>
                    <type>DEPENDENT</type>
                    <key>PowerState</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <applications>
                        <application>
                            <name>Status</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].PowerState</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                </item>
                <item>
                    <name>Version</name>
                    <type>DEPENDENT</type>
                    <key>Version</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <applications>
                        <application>
                            <name>Status</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].Version</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                </item>
                <item>
                    <name>VM Count</name>
                    <type>DEPENDENT</type>
                    <key>VMCount</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <applications>
                        <application>
                            <name>Status</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].VMCount</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                </item>
                <item>
                    <name>Volume -1 Free Space Percentage</name>
                    <type>CALCULATED</type>
                    <key>Volume-1-FreeSpacePerc</key>
                    <value_type>FLOAT</value_type>
                    <units>%</units>
                    <params>100 * last(&quot;Volume-1_FreeSpaceGB&quot;) / last(&quot;Volume-1_TotalSpaceGB&quot;)</params>
                    <applications>
                        <application>
                            <name>Datastore General</name>
                        </application>
                    </applications>
                    <triggers>
                        <trigger>
                            <expression>{last()}&lt;{$DATASTORE_FREE_WARN}</expression>
                            <name>Volume-1 Free Space too Low on {HOST.NAME}</name>
                            <priority>HIGH</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Volume-1 Bus Reset</name>
                    <type>DEPENDENT</type>
                    <key>Volume-1_BusReset</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <units>ms</units>
                    <applications>
                        <application>
                            <name>Datastore Performance</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].volume_1_disk_busresets_summation</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                    <triggers>
                        <trigger>
                            <expression>{last()}&gt;0</expression>
                            <name>Volume-1 Bus Reset on {HOST.NAME}</name>
                            <priority>WARNING</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Volume-1 Commands Aborted</name>
                    <type>DEPENDENT</type>
                    <key>Volume-1_CommandsAborted</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <applications>
                        <application>
                            <name>Datastore Performance</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].volume_1_disk_commandsaborted_summation</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                    <triggers>
                        <trigger>
                            <expression>{last()}&gt;0</expression>
                            <name>Volume-1 Command Aborted on {HOST.NAME}</name>
                            <priority>WARNING</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Volume-1 Free Space GB</name>
                    <type>DEPENDENT</type>
                    <key>Volume-1_FreeSpaceGB</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <value_type>FLOAT</value_type>
                    <applications>
                        <application>
                            <name>Datastore General</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].volume_1_FreeSpaceGB</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                </item>
                <item>
                    <name>Volume-1 Kernel Latency (KAVG)</name>
                    <type>DEPENDENT</type>
                    <key>Volume-1_KernelLatency</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <units>ms</units>
                    <applications>
                        <application>
                            <name>Datastore Performance</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].volume_1_disk_kernellatency_average</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                    <triggers>
                        <trigger>
                            <expression>{avg(5m)}&gt;{$KAVG_LATENCY_WARN}</expression>
                            <name>Volume-1 KAVG too high on {HOST.NAME}</name>
                            <priority>WARNING</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Volume-1 Physical Latency (DAVG)</name>
                    <type>DEPENDENT</type>
                    <key>Volume-1_PhysicalLatency</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <units>ms</units>
                    <applications>
                        <application>
                            <name>Datastore Performance</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].volume_1_disk_devicelatency_average</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                    <triggers>
                        <trigger>
                            <expression>{avg(5m)}&gt;{$DAVG_LATENCY_WARN}</expression>
                            <name>Volume-1 DAVG too high on {HOST.NAME}</name>
                            <priority>WARNING</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Volume-1 Queue Command Latency (QAVG)</name>
                    <type>DEPENDENT</type>
                    <key>Volume-1_QueueCommandLatency</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <applications>
                        <application>
                            <name>Datastore Performance</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].volume_1_disk_queuelatency_average</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                    <triggers>
                        <trigger>
                            <expression>{avg(5m)}&gt;{$QAVG_LATENCY_WARN}</expression>
                            <name>Volume-1 QAVG Latency too High on {HOST.NAME}</name>
                            <priority>WARNING</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Volume-1 Total Space GB</name>
                    <type>DEPENDENT</type>
                    <key>Volume-1_TotalSpaceGB</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <value_type>FLOAT</value_type>
                    <applications>
                        <application>
                            <name>Datastore General</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].volume_1_CapacityGB</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                </item>
                <item>
                    <name>Volume-1 VMFS Version</name>
                    <type>DEPENDENT</type>
                    <key>Volume-1_VMFSVersion</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <applications>
                        <application>
                            <name>Datastore General</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].volume_1_VMFSVersion</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                </item>
                <item>
                    <name>Volume -2 Free Space Percentage</name>
                    <type>CALCULATED</type>
                    <key>Volume-2-FreeSpacePerc</key>
                    <value_type>FLOAT</value_type>
                    <units>%</units>
                    <params>100 * last(&quot;Volume-2_FreeSpaceGB&quot;) / last(&quot;Volume-2_TotalSpaceGB&quot;)</params>
                    <applications>
                        <application>
                            <name>Datastore General</name>
                        </application>
                    </applications>
                    <triggers>
                        <trigger>
                            <expression>{last()}&lt;{$DATASTORE_FREE_WARN}</expression>
                            <name>Volume-2 Free Space too Low on {HOST.NAME}</name>
                            <priority>HIGH</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Volume-2 Bus Reset</name>
                    <type>DEPENDENT</type>
                    <key>Volume-2_BusReset</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <units>ms</units>
                    <applications>
                        <application>
                            <name>Datastore Performance</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].volume_2_disk_busresets_summation</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                    <triggers>
                        <trigger>
                            <expression>{last()}&gt;0</expression>
                            <name>Volume-2 Bus Reset on {HOST.NAME}</name>
                            <priority>WARNING</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Volume-2 Commands Aborted</name>
                    <type>DEPENDENT</type>
                    <key>Volume-2_CommandsAborted</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <applications>
                        <application>
                            <name>Datastore Performance</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].volume_2_disk_commandsaborted_summation</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                    <triggers>
                        <trigger>
                            <expression>{last()}&gt;0</expression>
                            <name>Volume-2 Command Aborted on {HOST.NAME}</name>
                            <priority>WARNING</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Volume-2 Free Space GB</name>
                    <type>DEPENDENT</type>
                    <key>Volume-2_FreeSpaceGB</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <value_type>FLOAT</value_type>
                    <applications>
                        <application>
                            <name>Datastore General</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].volume_2_FreeSpaceGB</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                </item>
                <item>
                    <name>Volume-2 Kernel Latency (KAVG)</name>
                    <type>DEPENDENT</type>
                    <key>Volume-2_KernelLatency</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <units>ms</units>
                    <applications>
                        <application>
                            <name>Datastore Performance</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].volume_2_disk_kernellatency_average</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                    <triggers>
                        <trigger>
                            <expression>{avg(5m)}&gt;{$KAVG_LATENCY_WARN}</expression>
                            <name>Volume-2 KAVG too high on {HOST.NAME}</name>
                            <priority>WARNING</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Volume-2 Physical Latency (DAVG)</name>
                    <type>DEPENDENT</type>
                    <key>Volume-2_PhysicalLatency</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <units>ms</units>
                    <applications>
                        <application>
                            <name>Datastore Performance</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].volume_2_disk_devicelatency_average</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                    <triggers>
                        <trigger>
                            <expression>{avg(5m)}&gt;{$DAVG_LATENCY_WARN}</expression>
                            <name>Volume-2 DAVG too high on {HOST.NAME}</name>
                            <priority>WARNING</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Volume-2 Queue Command Latency (QAVG)</name>
                    <type>DEPENDENT</type>
                    <key>Volume-2_QueueCommandLatency</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <applications>
                        <application>
                            <name>Datastore Performance</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].volume_2_disk_queuelatency_average</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                    <triggers>
                        <trigger>
                            <expression>{avg(5m)}&gt;{$QAVG_LATENCY_WARN}</expression>
                            <name>Volume-2 QAVG Latency too High on {HOST.NAME}</name>
                            <priority>WARNING</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Volume-2 Total Space GB</name>
                    <type>DEPENDENT</type>
                    <key>Volume-2_TotalSpaceGB</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <value_type>FLOAT</value_type>
                    <applications>
                        <application>
                            <name>Datastore General</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].volume_2_CapacityGB</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                </item>
                <item>
                    <name>Volume-2 VMFS Version</name>
                    <type>DEPENDENT</type>
                    <key>Volume-2_VMFSVersion</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <applications>
                        <application>
                            <name>Datastore General</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].volume_2_VMFSVersion</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                </item>
                <item>
                    <name>Volume -3 Free Space Percentage</name>
                    <type>CALCULATED</type>
                    <key>Volume-3-FreeSpacePerc</key>
                    <value_type>FLOAT</value_type>
                    <units>%</units>
                    <params>100 * last(&quot;Volume-3_FreeSpaceGB&quot;) / last(&quot;Volume-3_TotalSpaceGB&quot;)</params>
                    <applications>
                        <application>
                            <name>Datastore General</name>
                        </application>
                    </applications>
                    <triggers>
                        <trigger>
                            <expression>{last()}&lt;{$DATASTORE_FREE_WARN}</expression>
                            <name>Volume-3 Free Space too Low on {HOST.NAME}</name>
                            <priority>HIGH</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Volume-3 Bus Reset</name>
                    <type>DEPENDENT</type>
                    <key>Volume-3_BusReset</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <units>ms</units>
                    <applications>
                        <application>
                            <name>Datastore Performance</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].volume_3_disk_busresets_summation</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                    <triggers>
                        <trigger>
                            <expression>{last()}&gt;0</expression>
                            <name>Volume-3 Bus Reset on {HOST.NAME}</name>
                            <priority>WARNING</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Volume-3 Commands Aborted</name>
                    <type>DEPENDENT</type>
                    <key>Volume-3_CommandsAborted</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <applications>
                        <application>
                            <name>Datastore Performance</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].volume_3_disk_commandsaborted_summation</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                    <triggers>
                        <trigger>
                            <expression>{last()}&gt;0</expression>
                            <name>Volume-3 Command Aborted on {HOST.NAME}</name>
                            <priority>WARNING</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Volume-3 Free Space GB</name>
                    <type>DEPENDENT</type>
                    <key>Volume-3_FreeSpaceGB</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <value_type>FLOAT</value_type>
                    <applications>
                        <application>
                            <name>Datastore General</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].volume_3_FreeSpaceGB</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                </item>
                <item>
                    <name>Volume-3 Kernel Latency (KAVG)</name>
                    <type>DEPENDENT</type>
                    <key>Volume-3_KernelLatency</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <units>ms</units>
                    <applications>
                        <application>
                            <name>Datastore Performance</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].volume_3_disk_kernellatency_average</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                    <triggers>
                        <trigger>
                            <expression>{avg(5m)}&gt;{$KAVG_LATENCY_WARN}</expression>
                            <name>Volume-3 KAVG too high on {HOST.NAME}</name>
                            <priority>WARNING</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Volume-3 Physical Latency (DAVG)</name>
                    <type>DEPENDENT</type>
                    <key>Volume-3_PhysicalLatency</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <units>ms</units>
                    <applications>
                        <application>
                            <name>Datastore Performance</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].volume_3_disk_devicelatency_average</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                    <triggers>
                        <trigger>
                            <expression>{avg(5m)}&gt;{$DAVG_LATENCY_WARN}</expression>
                            <name>Volume-3 DAVG too high on {HOST.NAME}</name>
                            <priority>WARNING</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Volume-3 Queue Command Latency (QAVG)</name>
                    <type>DEPENDENT</type>
                    <key>Volume-3_QueueCommandLatency</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <applications>
                        <application>
                            <name>Datastore Performance</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].volume_3_disk_queuelatency_average</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                    <triggers>
                        <trigger>
                            <expression>{avg(5m)}&gt;{$QAVG_LATENCY_WARN}</expression>
                            <name>Volume-3 QAVG Latency too High on {HOST.NAME}</name>
                            <priority>WARNING</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>Volume-3 Total Space GB</name>
                    <type>DEPENDENT</type>
                    <key>Volume-3_TotalSpaceGB</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <value_type>FLOAT</value_type>
                    <applications>
                        <application>
                            <name>Datastore General</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].volume_3_CapacityGB</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                </item>
                <item>
                    <name>Volume-3 VMFS Version</name>
                    <type>DEPENDENT</type>
                    <key>Volume-3_VMFSVersion</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <applications>
                        <application>
                            <name>Datastore General</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <params>$[0].volume_3_VMFSVersion</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    </master_item>
                </item>
                <item>
                    <name>Global Information</name>
                    <type>EXTERNAL</type>
                    <key>zabbix-check.sh[{$LISTENER_PORT},{HOST.HOST}]</key>
                    <delay>1m;1m/1-7,6:00-22:00</delay>
                    <history>30d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                </item>
            </items>
            <macros>
                <macro>
                    <macro>{$CPU_OVERCOMMIT_WARN}</macro>
                    <value>4</value>
                    <description>Threshold for vCPU commit ratio</description>
                </macro>
                <macro>
                    <macro>{$CPU_RDY_WARN}</macro>
                    <value>2000</value>
                    <description>CPURDY% (threshold 10%  * scaling Factor)</description>
                </macro>
                <macro>
                    <macro>{$CPU_USAGE_WARN}</macro>
                    <value>75</value>
                    <description>Threshold % for High Host CPU usage</description>
                </macro>
                <macro>
                    <macro>{$DATASTORE_FREE_WARN}</macro>
                    <value>20</value>
                    <description>Threshold % for Free Space on Datastore</description>
                </macro>
                <macro>
                    <macro>{$DAVG_LATENCY_WARN}</macro>
                    <value>50</value>
                    <description>Threshold ms for Total Disk latency</description>
                </macro>
                <macro>
                    <macro>{$KAVG_LATENCY_WARN}</macro>
                    <value>10</value>
                    <description>Threshold ms for Kernel Command Latency</description>
                </macro>
                <macro>
                    <macro>{$LISTENER_PORT}</macro>
                </macro>
                <macro>
                    <macro>{$MEM_USAGE_WARN}</macro>
                    <value>90</value>
                    <description>Threshold % for High Host RAM usage</description>
                </macro>
                <macro>
                    <macro>{$QAVG_LATENCY_WARN}</macro>
                    <value>5</value>
                    <description>Threshold ms for Queue Command Latency</description>
                </macro>
            </macros>
        </template>
    </templates>
</zabbix_export>
